<!--Form Created task-->
<app-pop-up *ngIf="errorMessage" [message]="errorMessage" (closeMessage)="onHandleError()"></app-pop-up>
<div class="row justify-content-md-center">
  <div class="col-xs-12 col-md-10 col-lg-6 ">
    <div class="card">
      <div class="card-body">
        <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" (keydown.enter)="$event.preventDefault()">
          <input type="text" class="form-control no-border" placeholder="Enter category" formControlName="categoryName">
          <p class="small text-danger"
             *ngIf="!taskForm.get('categoryName').valid && taskForm.get('categoryName').touched">Category
            name must be has a name</p>
          <div class="custom-control custom-checkbox mt-3" #taskElement>
            <div formArrayName="tasks">
              <div class="form-check pt-1 pb-1 row-border"
                   *ngFor="let taskCtrl of taskControls;let i = index" [formGroupName]="i">
                <input class="form-check-input" type="checkbox" (change)="onChangeStatusTask($event,i)"
                       [checked]="taskForm.get('tasks').controls[i].get('status').value=='done'">
                <div class="full-width">
                  <input type="text" class="form-check-label no-border col-8" formControlName='name'>
                  <span>
                  <span class="col-1" [owlDateTimeTrigger]="dt1">
                              <i class="fa fa-history text-success trigger"></i>
                              <input [owlDateTime]="dt1" class="datetime-widget hidden--element"
                                     [min]="minDate" formControlName="deadline">
                            </span>
                  <owl-date-time #dt1></owl-date-time>
                  <span><i class="fa fa-times col-1 text-danger" (click)="onDeleteTask(i)"></i></span>
                  </span>
                  <p>
                    <span class="small text-danger"
                          *ngIf="!taskForm.get('tasks').controls[i].valid ">*required <br></span>
                    <span class="small">Status: {{taskForm.get('tasks').controls[i].get('status').value}}</span> <br>
                    <span
                      class="small">Deadline: {{taskForm.get('tasks').controls[i].get('deadline').value| date:'short'}}</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="form-group mt-2">
              <div class="row">
                <div class="col-10 p-0">
                  <input type="text" placeholder=" +   Add new task" class="col-12 no-border p-0"
                         (keydown.enter)="onNewTask($event)">
                </div>
              </div>
            </div>
          </div>
          <div class="text-right">
            <input type="button" class="btn btn-outline-info" value="Cancel" (click)="onResetForm()">
            <input type="submit" class="btn btn-primary ml-3" [disabled]="!taskForm.valid" value="Save">
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!--End Form Created task-->

<!--Form Show quick task created-->
<div class="row">
  <div class="col-xs-12 col-md-6 col-lg-4 mt-4" *ngFor="let tasks of listOfTasks;let k =index">
    <div class="card" appTaskCardSelected>
      <div class="card-body position-relative">
        <div class="header-card">
          <h4>{{tasks.categoryName}}</h4>
          <i class="fa fa-close position-absolute position__btn--close text-danger" (click)="onRemoveListTask(k)"></i>
        </div>
        <div *ngFor="let t of tasks.tasks;let i = index">
          <div class="form-check pt-1 pb-1 row-border">
            <input class="form-check-input" type="checkbox" (change)="onChangeOldStatusTask($event,k,i)"
                   [checked]="t.status=='done'">
            <div class="full-width">
              <input type="text" class="form-check-label no-border col-9" [value]="t.name"
                     (keydown.enter)="onEditTask($event,k,i)">
              <span class="col-1 position-relative tooltip-custom--hover p-0">
                <i class="fa fa-info-circle text-info"></i>
              </span>
              <div class="tooltip-custom">Deadline: {{t.deadline|date:'short'}} <br>Status: {{t.status}}</div>
              <i class="fa fa-trash text-danger col-1 pl-3" (click)="onRemoveTask(k,i)"></i>
            </div>
          </div>
        </div>
        <input type="text" placeholder=" +     Add new task" class="col-12 no-border p-0"
               (keydown.enter)="onNewTaskOfLoaded($event,k)">
      </div>
    </div>
  </div>
</div>
<!--End Form Show quick task created-->
